<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Gopher Windows</title>

		<meta name="description" content="Grow your users from an unlikely source: Windows developers">
		<meta name="author" content="Carolyn Van Slyck">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="icon" type="image/png" href="images/favicon.ico"/>
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Open links outside of presentation -->
		<base target="_blank">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
						<h1>Grow your users from an unlikely source:</h1>
						<h3>Windows developers</h3>

						<p><img src="images/gopher-plane-windows.png" alt="Gopher Windows Skywriter Plane"/></p>
						<p>Carolyn Van Slyck</p>

						<aside class="notes">
							Takeaways: beyond cross-compiling, user experience and gaining contributors
						</aside>
				</section>

				<section id="me">
					<h2>Support ALL THE PEOPLES!</h2>

					<p><img src="images/accessibility-dino.png" alt="Accessibility Dinosaur" /></p>

					<h2>Rackspace Developer Experience Team</h2>
					<p>Occasional Windows Ambassador / Apologist</p>
				</section>

				<section id="incoming!">
					<img src="images/windevs-coming.jpg" alt="Game of Thrones: Brace Yourselves, WinDevs are coming" />

					<aside class="notes">
						Tooling/Tech driven<br/>
						Windows 10 with Ubunu
					</aside>
				</section>

				<section id="failboat">
					<img src="images/uex-fail.jpg" alt="Pinterst Fail: Expectations vs. Reality" />

					<table>
						<tr><th>Expecations</th><th>Reality</th></tr>
						<tr><td>Easy to install</td><td>... if you BYOB</td></tr>
						<tr><td>It just works<sup style="font-size: 0.5em">TM</sup></td><td>... on my Mac</td></tr>
						<tr><td>Documented</td><td>... only for bash</td></tr>
						<tr><td>Accepts PRs</td><td>... if you can build it</td></tr>
					</table>
					<aside class="notes">

					</aside>
				</section>

				<section id="grouphug">
					<h2>Why Bother?</h2>

					<aside class="notes">
						Because you made something cool and want everyone to use it<br/>
						More users = more contributors</br>
						Improved code</br>
						It may be your job
					</aside>
				</section>

				<section id="storytime">
					<h2>My Playground</h2>

					<table>
						<tr>
							<td><img src="images/dvm-logo.png" alt="Docker Version Manager (dvm) logo" /></td>
							<td><img src="images/carina-cli-logo.png" alt="Carina CLI logo" /></td>
							<td><img src="images/rack-cli-logo.png" alt="Rackspace CLI logo" /></td>
						</tr>
						<tr>
							<td style="text-align: center">dvm</td>
							<td style="text-align: center">carina</td>
							<td style="text-align: center">rack</td>
						</tr>
					</table>

					<aside class="notes">
						dvm sh->go rewrite<br/>
						carina pkg + conditional compilation<br/>
						rack pkg<br/>
					</aside>
				</section>

				<section id="maslow">
					<img src="images/pyramid.png" alt="1. cross-platform code, 2. user experience, 3. contributors, 4. ci" height="400px" />
				</section>

				<section id="code">
					<h2>Cross-Platform Code</h2>
					<img src="images/pyramid-code.png" alt="1. cross-platform code, 2. user experience, 3. contributors, 4. ci" height="400px" />
				</section>

				<section id="go-build">
					<h2>Cross Compilation</h2>

<pre><code class="bash" data-trim data-noescape>
GOOS=windows GOARCH=amd64 go build -o magic.exe
</code></pre>

					<aside class="notes">
						This is why I love go over other languages!<br/>
						Buuuut this is just the first step...
					</aside>
				</section>

				<section>
					<section id="go-files">
						<h2>Conditional Compilation</h2>

						<ul>
							<li>magic.go</li>
							<li>magic.386.go - <code class="go inline"><span class="hljs-comment">// +build 386</span></code></li>
							<li>magic.amd64.go - <code class="go inline"><span class="hljs-comment">// +build amd64</span></code></li>
							<li>magic.darwin.go - <code class="go inline"><span class="hljs-comment">// +build darwin</span></code></li>
							<li>magic.nix.go - <code class="go inline"><span class="hljs-comment">// +build !windows</span></code></li>
							<li>magic.windows.go - <code class="go inline"><span class="hljs-comment">// +build windows</span></code></li>
						</ul>

						<aside class="notes">
							composable<br/>
							isn't restricted to just one OS<br/>
							comments are more powerful
						</aside>
					</section>
					<section id="go-files-example" style="font-size: 0.9em">
						<p style="text-align: left">magic.go</p>
<pre><code class="go" data-trim data-noescape>
func getMagicFilePath() string {
  return filepath.Join(getUserHomeDir, "magic" + fileExtension)
}
</code></pre>

						<p style="text-align: left">magic.nix.go</p>
<pre><code class="go" data-trim data-noescape style="font-size: 0.9em">
// +build !windows

const fileExtension string = ".sh"

func getUserHomeDir() string {
  return os.Getenv("HOME")
}
</code></pre>

						<p style="text-align: left">magic.windows.go</p>
<pre><code class="go" data-trim data-noescape style="font-size: 0.9em">
// +build windows

const fileExtension string = ".ps1"

func getUserHomeDir() string {
  return os.Getenv("USERPROFILE")
}
</code></pre>
					</section>
				</section>

				<section id="env">
					<h2>Environment Variables</h2>

					<table>
						<thead>
							<tr><th>*nix</th><th>windows</th></tr>
						</thead>
						<tbody class="envvar">
							<tr><td>home</td><td>userprofile <br/> (local)appdata</td></tr>
							<tr><td>path <code class="inline">:</code></td><td>path <code class="inline">;</code></td></tr>
							<tr><td>shell</td><td>üí©</td></tr>
							<tr><td>tmpdir</td><td>tmp/temp</td></tr>
							<tr><td>-</td><td>pathext ‚ú®</td></tr>
						</tbody>
					</table>
				</section>

				<section id="paths">
					<h2>File Paths</h2>

					<ul>
						<li>Stick with <code class="inline">import "path/filepath"</code></li>
						<li>Windows is mostly cool with <code class="inline">/</code> or <code class="inline">\</code></li>
						<li>Use quoted paths to deal with whitespace in paths</li>
						<li>Windows 10 removed the 260 char max file path limit! üéâ</li>
					</ul>

					<aside class="notes">
						Not as awful as it first appears<br/>
						Mostly a problem outside of go, e.g. in scripts
					</aside>
				</section>

				<section id="ux">
					<h2>User Experience</h2>
					<img src="images/pyramid-ux.png" alt="1. cross-platform code, 2. user experience, 3. contributors, 4. ci" height="400px" />

					<aside class="notes">
						* documentation (long line continuation, cmd/bash/powershell)
						* installation (choco)
						* cli - prefer with posix style arguments, `git commit --message foobar`
						* logging
					</aside>
				</section>

				<section id="doc">
					<h2>Documentation</h2>

					<img src="images/mlp-doc-salute.png" alt="My Little Ponies: Salute to Documentation" />

					<aside class="notes">
						* Installation<br/>
						* Usage<br/>
						* Contributing<br/>
						</ul>
					</aside>
				</section>

				<section>
					<section id="docstyle">
<p style="text-align: left; margin-left: 40px"><strong>Mac OS X with Homebrew</strong></p>
<pre><code class="bash" data-trim data-noescape style="font-size: 0.9em">
$ brew install magic
</code></pre>

<p style="text-align: left; margin-left: 40px"><strong>Mac OS X and Linux</strong></p>
<pre><code class="bash" data-trim data-noescape style="font-size: 0.9em">
$ curl -sL https://example.com/install-magic.sh | sh
</code></pre>

<p style="text-align: left; margin-left: 40px"><strong>Windows with Chocolatey</strong></p>
<pre><code class="powershell" data-trim data-noescape style="font-size: 0.9em">
> choco install magic
</code></pre>

<p style="text-align: left; margin-left: 40px"><strong>Windows</strong></p>
<pre><code class="powershell" data-trim data-noescape style="font-size: 0.9em">
> iwr https://example.com/install-magic.ps1 -UseBasicParsing | iex
</code></pre>
					</section>

					<section id="shells">
						<h2>Windows Shells</h2>

						<table style="white-space: nowrap">
							<tr><th>CMD</th><th>PowerShell</th><th>Bash</th></tr>
							<tr>
								<td>
									<p>üëç Familiar to users</p>
									<p>üëé Limited funcionality</p>
								</td>
							<td>
								<p>üëç Quirky but powerful</p>
								<p>üëé Many versions</p>
							</td>
							<td>
								<p>üëç Familiar to devs</p>
								<p>‚ùì Scripting reuse</p>
								<p>üëé Fewer users</p>
							</td></tr>
						</table>

						<p style="font-size: 0.9em">If you can only document one for end-users, use PowerShell v4.0</p>
					</section>
				</section>

				<section>
					<section id="installation">
						<h2>Installation</h2>

						<p>May I recommend some delicious chocolatey nuget...</p>
	<pre><code class="powershell" data-trim data-noescape style="font-size: 0.82em">
	choco install magic
	</code></pre>

						<p>Perhaps you like to live dangerously?</p>
	<pre><code class="powershell" data-trim data-noescape style="font-size: 0.82em">
	iwr https://example.com/install-magic.ps1 -UseBasicParsing | iex
	</code></pre>
					</section>

					<section id="choco">

<p style="text-align: left">magic.nuspec</p>
<pre><code class="xml" data-trim data-noescape>
&lt;package&gt;
  &lt;metadata&gt;
    &lt;id&gt;magic&lt;/id&gt;
    &lt;version&gt;$version$&lt;/version&gt;
    &lt;authors&gt;Carolyn Van Slyck&lt;/authors&gt;
    &lt;description&gt;It does both stuff _and_ things!&lt;/description&gt;
  &lt;/metadata&gt;
  &lt;files&gt;
    &lt;file src=&quot;magic.exe&quot; /&gt;
  &lt;/files&gt;
&lt;/package&gt;
</code></pre>

<p style="text-align: left">Ship it!<img src="images/shipit.png" alt"ship it squirrel" style="height: 1em; border-radius: 0; margin: 0 0 0 0.5em"/></p>
<pre><code class="xml" data-trim data-noescape>
> choco pack magic.nuspec --Version 1.0.0
> choco push magic.1.0.0.nupkg --api-key my-secret-api-key
</code></pre>

<p style="text-align: left">Usage</p>
<pre><code class="xml" data-trim data-noescape>
> choco install magic
> magic
üéµ Oh oh it's magic! üéµ
</code></pre>

					</section>

					<section id="install-script">
						<p style="text-align: left">install-magic.ps1</p>
<pre><code class="powershell" data-trim data-noescape style="font-size: 0.9em">
if($PSVersionTable -eq $null -or $PSVersionTable.PSVersion.Major -lt 4){
  Write-Output "magic requires PowerShell version 4 or higher."
  Exit 1
}

$installDir = Join-Path $env:USERPROFILE .magic
iwr -uri https://example.com/magic.exe -outfile $installDir

echo 'Magic is now installed!'
echo 'Add it to your path by running $env:PATH += ";" + $installDir'
</code></pre>
					</section>
				</section>

				<section id="contrib">
					<h2>Contributors</h2>
					<img src="images/pyramid-contrib.png" alt="1. cross-platform code, 2. user experience, 3. contributors, 4. ci" height="400px" />
				</section>

				<section id="build">
					<img src="images/build-of-dreams.png" alt="If they can build it, they will come" />
				</section>

				<section>
					<section id="build-scripts">
						<h2>Build Scripts</h2>

						<p>Never more than a <br/><code class="inline">git clone &amp;&amp; [make][./build]</code><br/> away from success</p>

						<aside class="notes">
							Reasonable Assumptions:<br/>
								* Go is installed<br/>
								* Bash is available<br/>
						</aside>
					</section>

					<section id="make">
						<h2>Make</h2>
<p style="text-align: left">Makefile</p>
<pre><code class="makefile" data-trim data-noescape style="font-size: 0.9em">
get-deps:
	@echo "Installing glide..."
	go get github.com/Masterminds/glide
	glide install

cross-build: clean get-deps linux darwin windows

linux: $(GOFILES) get-deps
	GOOS=linux GOARCH=amd64 go build -o bin/Linux/x86_64/magic

darwin: $(GOFILES) get-deps
	GOOS=darwin GOARCH=amd64 go build -o bin/Darwin/x86_64/magic

windows: $(GOFILES) get-deps
	GOOS=windows GOARCH=amd64 go build -o bin/Windows/x86_64/magic.exe
</pre></code>

					<p style="font-size: 0.9em">* Assumes Git for Windows SDK or Cygwin is installed</p>
					</section>

					<section id="Bash">
						<h2>Bash</h2>

<p style="text-align: left">build</p>
<pre><code class="bash" data-trim data-noescape style="font-size: 0.9em">
#! /bin/bash

# Get our magical dependencies
go get github.com/Masterminds/glide
glide install

# Let's make some magic
GOOS=linux GOARCH=amd64 go build -o bin/Linux/x86_64/magic
GOOS=darwin GOARCH=amd64 go build -o bin/Darwin/x86_64/magic
GOOS=windows GOARCH=amd64 go build -o bin/Windows/x86_64/magic.exe
</code></pre>
					</section>
				</section>

				<section id="ci">
					<h2>Continuous Integration</h2>
					<img src="images/pyramid-ci.png" alt="1. cross-platform code, 2. user experience, 3. contributors, 4. ci" height="400px" />

					<aside class="notes">
						* Not really optional these days, but...
						* Contributor confidence
						* Less likely to break something on other platforms
						* Simply good form
					</aside>
				</section>

				<section id="ci-build">
					what should be in a ci build for windows?
					* verify the the old build script still works!
					* test the app on windows
					* chocolatey packaging and publishing
				</section>

				<section>
					<section id="ci-services">
						<h2>CI for Windows</h2>
						appveyor
						myget

						<aside class="notes">
							* obviously if you are running your own, jenkins, team city, bamboo, etc all works too
							* touch on future of windocker
						</aside>
					</section>

					<section id="appveyor">
<p style="text-align: left">appveyor.yml</p>
<pre><code class="yaml" data-trim data-noescape style="font-size: 0.9em">
TODO SAMPLE APPVEYOR FILE
</code></pre>
					</section>

					<section id="myget">
<p style="text-align: left">myget.ps1</p>
<pre><code class="bash" data-trim data-noescape style="font-size: 0.9em">
TODO SAMPLE MYGET FILE
</code></pre>

						<aside class="notes">
							* myget feeds vs. chocolatey
						</aside>
					</section>
				</section>
				
				<section id="takeout">
					<h2>Thank you</h2>

					<p><img src="images/me.gif" width="120px"/></p>
					<p><a href="http://twitter.com/carolynvs" target="_blank">@carolynvs</a></p>
					<p><a href="http://carolynvanslyck.com/talk/devex/gowin">http://carolynvanslyck.com/talk/devex/gowin</a></p>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				keyboard: {
					190: null // Disable blank screen hell
				},

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/external/external.js', condition: function() { return !!document.querySelector( '[data-external]' ); } },
				]
			});

		</script>

	</body>
</html>
